<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!--
    Copyright (C) 2019, 2020 Oleksandr Komarov (https://modool.pro)
    License Other proprietary.
    -->

    <record id="view_odoo_obj_form" model="ir.ui.view">
        <field name="name">odoo.obj.form</field>
        <field name="model">odoo.obj</field>
        <field name="arch" type="xml">
            <form string="DB Object">
                <sheet>
                    <div class="oe_title">
                        <label for="name" class="oe_edit_only"/>
                        <h1><field name="name" placeholder="e.g. res.partner"/></h1>
                    </div>
                    <group>
                        <field name="comment"/>
                        <field name="description"/>
                        <field name="owner_id" attrs="{'invisible': [('owner_id','=',False)]}"/>
                        <field name="parent_id" attrs="{'invisible': [('parent_id','=',False)]}"/>
                    </group>
                    <notebook>
                        <page name="extra" string="Extra Info">
                            <group>
                                <group string="Common data">
                                    <field name="is_folder"/>
                                    <field name="obj_type"/>
                                    <field name="del_mark"/>
                                    <field name="is_updated"/>
                                    <field name="odoo_conf_id"/>
                                    <field name="o1c_uuid"/>
                                </group>
                                <group string="Field data" attrs="{'invisible': [('obj_type','!=','field')]}">
                                    <field name="f_type"/>
                                    <field name="comodel_id"/>
                                    <field name="model_name"/>
                                    <field name="size"/>
                                </group>
                            </group>
                        </page>
                        <page name="childs" string="Childs">
                            <field name="child_ids" widget="one2many" context="{'odoo_conf_id': id}">
                                <!-- Sinting is slow down:   default_order="is_updated desc,parent_id,name" -->
                               <tree decoration-muted="del_mark" decoration-danger="is_updated">
                                    <field name="name"/>
                                    <field name="f_type"/>
                                    <field name="comodel_id"/>
                                    <field name="description"/>
                                    <field name="is_updated" invisible="1"/>
                                    <field name="del_mark" invisible="1"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>


    <record id='odoo_obj_view_tree' model='ir.ui.view'>
        <field name="name">odoo.obj.tree</field>
        <field name="model">odoo.obj</field>
        <field name="arch" type="xml">
            <tree default_order="name" decoration-muted="del_mark" decoration-danger="is_updated">
                <field name="name"/>
                <field name="f_type"/>
                <field name="parent_id"/>
                <field name="is_updated" invisible="1"/>
                <field name="del_mark" invisible="1"/>
            </tree>
        </field>
    </record>

    <record id='odoo_obj_view_search' model='ir.ui.view'>
        <field name="name">odoo.obj.search</field>
        <field name="model">odoo.obj</field>
        <field name="arch" type="xml">
            <search>
                <field name="name" />
                <filter string="New / Updated" name="filter_new_updated" domain="[('is_updated','=',True)]"/>
                <filter string="Models" name="filter_models" domain="[('parent_id','=',False)]"/>
                <filter string="Fields" name="filter_fields" domain="[('parent_id','!=',False)]"/>
                <filter string="Removed" name="filter_removed" domain="[('del_mark','=',True)]"/>
                <group expand="1" string="Group By">
                    <filter name="groupby_conf" string="Configuration"
                            context="{'group_by' : 'odoo_conf_id'}"/>
                    <filter name="groupby_parent" string="Parent"
                            context="{'group_by' : 'parent_id'}"/>
                </group>
            </search>
        </field>
    </record>

    <record id="action_odoo_obj" model="ir.actions.act_window">
        <field name="name">Objects</field>
        <field name="res_model">odoo.obj</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{
            'search_default_filter_models': 1,
            'search_default_groupby_conf': 1,
            'search_default_groupby_parent': 1,
        }</field>
    </record>

    <!--Level 2-->
    <menuitem id="menu_odoo_obj" name="Objects" parent="menu_1c_struct_group"
        action="action_odoo_obj" sequence="2"/>

</odoo>